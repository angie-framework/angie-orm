<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">src/index.js | API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
</head>
<body class="layout-container">

<header>
  <a href="./">Home</a>
  <a href="identifiers.html">Identifier</a>
  <a href="source.html">Source</a>
  
  <a data-ice="repoURL" href="https://github.com/benderTheCrime/angie-orm.git" class="repo-url-github">Repository</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div data-ice="classWrap">
  <h2>Class</h2>
  <ul>
    
  <li data-ice="classDoc"><span><a href="class/src/util/$ExceptionsProvider.js~$$InvalidConfigError.html">$$InvalidConfigError</a></span></li>
<li data-ice="classDoc"><span><a href="class/src/models/$Fields.js~BaseField.html">BaseField</a></span></li>
<li data-ice="classDoc"><span><a href="class/src/models/BaseModel.js~BaseModel.html">BaseModel</a></span></li>
<li data-ice="classDoc"><span><a href="class/src/databases/FirebaseConnection.js~FirebaseConnection.html">FirebaseConnection</a></span></li>
<li data-ice="classDoc"><span><a href="class/src/databases/MongoDBConnection.js~MongoDBConnection.html">MongoDBConnection</a></span></li>
<li data-ice="classDoc"><span><a href="class/src/databases/MySqlConnection.js~MySqlConnection.html">MySqlConnection</a></span></li>
<li data-ice="classDoc"><span><a href="class/src/databases/SqliteConnection.js~SqliteConnection.html">SqliteConnection</a></span></li>
</ul>
</div>



<div data-ice="functionWrap">
  <h2><a href="function/">Function</a></h2>
  <ul>
    
  <li data-ice="functionDoc"><span><a href="function/index.html#static-function-AngieDatabaseRouter">AngieDatabaseRouter</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-Base">Base</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-runTests">runTests</a></span></li>
</ul>
</div>






</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/index.js</h1>
<pre class="source-code line-number"><code class="prettyprint linenums" data-ice="content">/**
 * @module index.js
 * @author Joe Groseclose &lt;@benderTheCrime&gt;
 * @date 8/23/2015
 */

// System Modules
import {exec} from                  &apos;child_process&apos;;
import {gray} from                  &apos;chalk&apos;;
import $LogProvider from            &apos;angie-log&apos;;

// Angie ORM Global Modules
import &apos;./Angie&apos;;

// Angie ORM Modules
import AngieDatabaseRouter from     &apos;./databases/AngieDatabaseRouter&apos;;
import * as $$FieldProvider from    &apos;./models/$Fields&apos;;

const p = process;
let args = [];

// Remove trivial arguments
p.argv.forEach(function(v) {
    if (!v.match(/(node|iojs|index|help|angie(\-orm)?)/)) {
        args.push(v);
    } else if (v === &apos;help&apos;) {
        help();
    }
});

// Route the CLI request to a specific command if running from CLI
if (
    args.length &amp;&amp;
    args.some((v) =&gt; [ &apos;syncdb&apos;, &apos;migrate&apos;, &apos;test&apos; ].indexOf(v) &gt; -1)
) {
    switch ((args[0] || &apos;&apos;).toLowerCase()) {
        case &apos;syncdb&apos;:
            AngieDatabaseRouter(args).sync();
            break;
        case &apos;migrate&apos;:
            AngieDatabaseRouter(args).migrate();
            break;
        default:
            runTests();
    }
}

function runTests() {

    // TODO is there any way to carry the stream output from gulp instead
    // of capturing stdout?
    exec(`cd ${__dirname} &amp;&amp; gulp`, function(e, std, err) {
        $LogProvider.info(std);
        if (err) {
            $LogProvider.error(err);
        }
        if (e) {
            throw new Error(e);
        }
    });
}

function help() {
    $LogProvider.bold(&apos;Angie ORM&apos;);
    console.log(&apos;A flexible, Promise-based ORM for the Angie MVC&apos;);
    console.log(&apos;\r&apos;);
    $LogProvider.bold(&apos;Version:&apos;);
    console.log(global.ANGIE_ORM_VERSION);
    console.log(&apos;\r&apos;);
    $LogProvider.bold(&apos;Commands:&apos;);
    console.log(
        &apos;syncdb [ database ]                                                   &apos; +
        gray(
            &apos;Sync the current specified databases in the AngieFile. &apos; +
            &apos;Defaults to the default created database&apos;
        )
    );
    console.log(
        &apos;migrations [ --destructive -- optional ] [ --dryrun -- optional ]     &apos; +
        gray(
            &apos;Checks to see if the database and the specified &apos; +
            &apos;models are out of sync. Generates NO files.&apos;
        )
    );
    console.log(
        &apos;test                                                                  &apos; +
        gray(
            &apos;Runs the Angie test suite and prints the results in the &apos; +
            &apos;console&apos;
        )
    );
    p.exit(0);
}

export {$$FieldProvider as $$Fields};</code></pre>
</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.1.2)</span></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
