<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl">
  <title data-ice="title">API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
</head>
<body class="layout-container">

<header>
  <a href="./">Home</a>
  <a href="identifiers.html">Identifier</a>
  <a href="source.html">Source</a>
  
  <a data-ice="repoURL" href="https://github.com/benderTheCrime/angie-orm.git" class="repo-url-github">Repository</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div data-ice="classWrap">
  <h2>Class</h2>
  <ul>
    
  <li data-ice="classDoc"><span><a href="class/src/util/$ExceptionsProvider.js~$$InvalidConfigError.html">$$InvalidConfigError</a></span></li>
<li data-ice="classDoc"><span><a href="class/src/models/$Fields.js~BaseField.html">BaseField</a></span></li>
<li data-ice="classDoc"><span><a href="class/src/models/BaseModel.js~BaseModel.html">BaseModel</a></span></li>
<li data-ice="classDoc"><span><a href="class/src/databases/FirebaseConnection.js~FirebaseConnection.html">FirebaseConnection</a></span></li>
<li data-ice="classDoc"><span><a href="class/src/databases/MongoDBConnection.js~MongoDBConnection.html">MongoDBConnection</a></span></li>
<li data-ice="classDoc"><span><a href="class/src/databases/MySqlConnection.js~MySqlConnection.html">MySqlConnection</a></span></li>
<li data-ice="classDoc"><span><a href="class/src/databases/SqliteConnection.js~SqliteConnection.html">SqliteConnection</a></span></li>
</ul>
</div>



<div data-ice="functionWrap">
  <h2><a href="function/">Function</a></h2>
  <ul>
    
  <li data-ice="functionDoc"><span><a href="function/index.html#static-function-AngieDatabaseRouter">AngieDatabaseRouter</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-Base">Base</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-runTests">runTests</a></span></li>
</ul>
</div>






</nav>

<div class="content" data-ice="content"><div data-ice="index"><h2 id="angie-orm">Angie ORM</h2>
<p><img src="https://travis-ci.org/benderTheCrime/angie-orm.svg?branch=master" alt="build status" title="build status">
<img src="https://img.shields.io/badge/iojs-1.7.1+-brightgreen.svg" alt="iojs support" title="iojs support">
<img src="https://img.shields.io/badge/node-0.12.0+-brightgreen.svg" alt="node support" title="node support">
<img src="https://rawgit.com/benderTheCrime/angie-orm/master/svg/coverage.svg" alt="code coverage" title="code coverage">
<img src="https://img.shields.io/npm/dm/angie-orm.svg" alt="npm downloads" title="npm downloads"></p>
<p><a href="https://nodei.co/npm/angie-orm/"><img src="https://nodei.co/npm/angie-orm.png?downloads=true&amp;downloadRank=true&amp;stars=true" alt="NPM"></a></p>
<h3 id="usage">Usage</h3>
<pre><code class="lang-bash"><pre class="source-code"><code class="prettyprint">npm i -g angie-orm
angie-orm help</code></pre>
</code></pre>
<p>Building databases is easy! In a file called <code>AngieORMFile.json</code>:</p>
<pre><code><pre class="source-code"><code class="prettyprint">{
    &quot;databases&quot;: {
        &quot;default&quot;: {
            &quot;type&quot;: &quot;sqlite3&quot;,
            &quot;name&quot;: &quot;angie.db&quot;
        },
        &quot;test_site&quot;: {
            &quot;type&quot;: &quot;mysql&quot;,
            &quot;alias&quot;: &quot;angie_site&quot;,
            &quot;username&quot;: &quot;root&quot;
        }
    }
}</code></pre>
</code></pre><p>You can make models in several ways</p>
<pre><code><pre class="source-code"><code class="prettyprint">global.app.Model(&apos;test&apos;, function($Fields) {
    let obj = {};
    obj.test = new $Fields.CharField({
        default: () =&gt; &apos;test &apos; + &apos;test&apos;
    });
    obj.many = new $Fields.ManyToManyField(&apos;test2&apos;, {
        name: &apos;test&apos;
    });
    return obj;
});

@Model
class test {
    constructor($Fields) {
        this.test = new $Fields.CharField({
            default: () =&gt; &apos;test &apos; + &apos;test&apos;
        });
        this.many = new $Fields.ManyToManyField(&apos;test2&apos;, {
            name: &apos;test&apos;
        });
    }
}</code></pre>
</code></pre><p>These two models are functionally equivalent. To actually build your databases:</p>
<pre><code><pre class="source-code"><code class="prettyprint">angie-orm syncdb [name]</code></pre>
</code></pre><p>Where if no name is specified, the default database will be synced. This will also automatically migrate your database, but a command for migrating databases is also available:</p>
<pre><code><pre class="source-code"><code class="prettyprint">angie-orm syncdb [name] [--destructive]</code></pre>
</code></pre><p>Where destructive will force stale tables and columns to be deleted. All of the above is done for you in your <code>AngieFile.json</code> if you are building an Angie application.</p>
<p>The first argument provided the function passed to the model will be $Fields, an object containing all of the available field types. Individual fields can also be required from their source in <code>angie-orm/src/models/$Fields</code>:</p>
<pre><code><pre class="source-code"><code class="prettyprint">import {CharField} from &apos;angie-orm/src/models/$Fields&apos;;

// or

require(&apos;angie-orm/src/models/$Fields&apos;).CharField;</code></pre>
</code></pre><p>Available Field Types Include:</p>
<ul>
<li><code>CharField</code></li>
<li><code>IntegerField</code></li>
<li><code>KeyField</code></li>
<li><code>ForeignKeyField</code></li>
<li><code>ManyToManyField</code></li>
</ul>
<p>Additionally, Fields can be passed configuration options on instantiation:</p>
<ul>
<li><code>minValue</code></li>
<li><code>maxValue</code></li>
<li><code>minLength</code></li>
<li><code>maxLength</code></li>
<li><code>nullable</code></li>
<li><code>unique</code></li>
<li><code>default</code></li>
</ul>
<p>In that order as arguments or in an Object. Foreign key and many to many fields require as a first argument a related table with which a reference is made. Additionally, these fields support <code>nesting</code> and <code>deepNesting</code> options. Many to many fields require a name be passed as reference.</p>
<p>If you have a need for a Field type that is not included, feel free to make a Pull Request (and follow the current format), or ask.</p>
<p>All queries return a Promise with a queryset</p>
<pre><code><pre class="source-code"><code class="prettyprint">global.app.Models.test.all().then(function(queryset) {
    return queryset[1].update({
        test: &apos;test&apos;
    }).then(function() {
        process.exit(0);
    });
});</code></pre>
</code></pre><p>querysets are extended Arrays, which include an index list of records with extended methods, a list of unmodified results (<code>queryset.results</code>), and methods</p>
<p>Model methods include:</p>
<ul>
<li><code>all</code>: Fetch all of the rows associated with a Models</li>
<li><code>fetch</code>: Fetch a certain number of rows</li>
<li><code>filter</code>: Filter a queryset. Supports conditionals.</li>
<li><code>create</code>: Create a record</li>
<li><code>delete</code>: Delete a record</li>
<li><code>update</code>: Update a record</li>
<li><code>exists</code>: Does the <code>filter</code> query return any results (passes a boolean to the resolve)</li>
</ul>
<p>All supports no arguments. The other READ methods on the tables support an Object as an argument with the following keys:</p>
<ul>
<li>values: The list of fields you would like to see</li>
<li>ord: Order &apos;ASC&apos; or &apos;DESC&apos;</li>
<li>int: The number of rows you would like to have returned</li>
<li>each key in the table, with a WHERE value (eg: <code>id&gt;1</code> would be <code>{ id: &apos;&gt;1&apos; }</code>)</li>
</ul>
<p>Create/Update queries require all non nullable fields to have a value in the arguments object or an error will be thrown. All queries support the <code>database</code> argument, which will specify the database that is hit for results.</p>
<p>Update queries are available on the entire queryset as well as each row. Additionally, methods to retrieve the <code>first</code> and <code>last</code> row in the returned records are available. Many to many fields have the added functionality of fetching <code>all</code> related rows, <code>fetch</code>ing, <code>filtering</code> related rows, and <code>add</code>ing, and <code>removing</code> related rows. The arguments to these methods must be existing related database objects.</p>
<p>For a list of Frequently Asked Questions, please see the <a href="https://github.com/benderTheCrime/angie-orm/blob/master/FAQ.md" title="FAQ">FAQ</a>. Please see the <a href="http://benderthecrime.github.io/angie" title="site">site</a> for a quickstart guide and the <a href="https://github.com/benderTheCrime/angie/blob/master/CHANGELOG.md">CHANGELOG</a> for an up to date list of changes. Contributors to this Project are outlined in the <a href="https://github.com/benderTheCrime/angie/blob/master/CONTRIBUTORS.md" title="CONTRIBUTORS">CONTRIBUTORS</a> file.</p>
</div>
</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.1.2)</span></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
